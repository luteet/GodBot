const body=document.querySelector("body"),html=document.querySelector("html");function validate(e,t){let a=e.value;if(0==/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a))return t.preventDefault(),e.classList.add("_error"),e.onblur=function(){e.classList.remove("_error")},!1}const headerBlocks=document.querySelectorAll(".header__select--block");let chart,chartTextColor,thisTarget;function chartFunc(){let e=document.querySelector("#statistics-chart"),t=e.getContext("2d");function a(e,a){let o=t.createLinearGradient(0,0,0,400);return o.addColorStop(0,e),o.addColorStop(1,a),o}let o=function(e){let t=[];return e.forEach((function(e){for(let a=0;a<24;a++)t.push(e)})),t}(["01.07.22","02.07.22","03.07.22","04.07.22","05.07.22","06.07.22","07.07.22"]);function l(e,t,a){let o=[],l=e;for(let e=0;e<=t;e++)l++,e>=a?o.push(l):o.push(NaN);return o}const s={labels:o,datasets:[{label:"Line 1",data:l(10,o.length/3,0),backgroundColor:a("rgba(202, 57, 12, 1)","rgba(202, 57, 12, 0.05)"),borderColor:["rgba(202, 57, 12, 1)"],pointRadius:0,borderWidth:1,cubicInterpolationMode:"monotone",fill:!0,tension:.4},{label:"Line 2",data:l(15,o.length,o.length/2),backgroundColor:a("rgba(27, 163, 73, 1)","rgba(27, 163, 73, 0.05)"),borderColor:["rgba(27, 163, 73, 1)"],pointRadius:0,borderWidth:1,cubicInterpolationMode:"monotone",fill:!0,tension:.4},{label:"Line 3",data:l(35,o.length,o.length/2),backgroundColor:"rgba(27, 163, 73, 1)",borderColor:["rgba(27, 163, 73, 1)"],pointRadius:0,borderWidth:1,cubicInterpolationMode:"monotone",fill:!1,tension:.4},{label:"Dashed",data:l(45,o.length,o.length/2),borderColor:["rgba(202, 57, 12, 1)"],pointRadius:0,borderWidth:1,borderDash:[5,5],cubicInterpolationMode:"monotone",fill:!1,tension:.4}]},i={id:"htmlLegend",afterUpdate(e,t,a){const o=((e,t)=>{const a=document.getElementById(t);let o=a.querySelector("ul");return o||(o=document.createElement("ul"),o.style.display="flex",o.style.flexDirection="row",o.style.margin=0,o.style.padding=0,a.appendChild(o)),o})(0,a.containerID);for(o.classList.add("chart__settings-popup--list","m-0","p-0","mt-3");o.firstChild;)o.firstChild.remove();e.options.plugins.legend.labels.generateLabels(e).forEach(t=>{const a=document.createElement("li"),l=document.createElement("button");a.classList.add("chart__settings-popup--item"),a.style.setProperty("--line-type",t.lineDash.length?"dashed":"solid"),a.style.setProperty("--line-color",t.strokeStyle),l.classList.add("chart__settings-popup--btn","_active"),t.hidden&&l.classList.remove("_active"),a.onclick=()=>{const{type:a}=e.config;"pie"===a||"doughnut"===a?e.toggleDataVisibility(t.index):e.setDatasetVisibility(t.datasetIndex,!e.isDatasetVisible(t.datasetIndex)),e.update()},l.textContent=t.text,a.appendChild(l),o.appendChild(a)})}};chart=new Chart(e.getContext("2d"),{type:"line",data:s,options:{responsive:!0,interaction:{intersect:!1},scales:{y:{grid:{display:!1,borderColor:"rgba(0,0,0,0)"},ticks:{color:chartTextColor,font:{size:12}}},x:{grid:{display:!1,borderColor:"rgba(0,0,0,0)"},ticks:{display:!1}}},pointBackgroundColor:"rgba(0,0,0,0)",pointBorderColor:"rgba(0, 0, 0, 0)",radius:0,plugins:{htmlLegend:{containerID:"legend-container"},tooltip:{enabled:!1,position:"nearest",external:e=>{const{chart:t,tooltip:a}=e,o=(e=>{let t=e.canvas.parentNode.querySelector("div");if(!t){t=document.createElement("div"),t.classList.add("chart__tooltip");let a=document.createElement("div");a.classList.add("chart__tooltip--body"),t.style.opacity=1,t.style.pointerEvents="none",t.style.transition="all .1s ease",t.appendChild(a),e.canvas.parentNode.appendChild(t)}return t})(t),l=document.createElement("div"),s=document.createElement("h4"),i=document.createElement("span"),r=document.createElement("strong");if(l.classList.add("chart__tooltip--body"),s.classList.add("chart__tooltip--title"),i.classList.add("chart__tooltip--date"),r.classList.add("chart__tooltip--price"),s.textContent=a.dataPoints[0].dataset.label,r.textContent="Price: "+a.dataPoints[0].formattedValue,0===a.opacity)return void(o.style.opacity=0);if(a.body){const e=a.title||[],t=a.body.map(e=>e.lines);e.forEach(e=>{i.textContent=e}),console.log(),t.forEach((e,t)=>{a.labelColors[t]});const l=o.querySelector(".chart__tooltip--body");for(;l.firstChild;)l.firstChild.remove();l.appendChild(s),l.appendChild(i),l.appendChild(r)}const{offsetLeft:n,offsetTop:c}=t.canvas;o.style.opacity=1,o.style.left=n+a.caretX+"px",o.style.top=c+a.caretY+"px",o.style.font=a.options.bodyFont.string,o.style.padding=a.options.padding+"px "+a.options.padding+"px"}},legend:{display:!1},labels:{usePointStyle:!0}}},plugins:[i]})}window.onresize=function(){headerBlocks.forEach(e=>{e.getBoundingClientRect().x<0&&e.classList.add("_left")})},chartFunc(),"dark"==localStorage.getItem("godbot-pro-theme")?(chartTextColor="#9899A6",chart&&chart.update()):(chartTextColor="#262628",chart&&chart.update()),body.addEventListener("click",(function(e){thisTarget=e.target;let t=thisTarget.closest(".login__form--submit");if(t)if(t.classList.contains("_disabled"))e.preventDefault();else{let a=t.closest("form").querySelector(".email-input");a&&validate(a,e)}let a=thisTarget.closest(".login__verification--btn");a&&(a.classList.contains("_disabled")||(a.classList.add("_disabled"),timer()));let o=thisTarget.closest(".header__theme--switch");o&&(o.classList.toggle("_active"),o.classList.contains("_active")?(localStorage.setItem("godbot-pro-theme","dark"),body.classList.add("_dark-theme"),chartTextColor="#9899A6",chart&&chart.update()):o.classList.contains("_active")||(localStorage.setItem("godbot-pro-theme","light"),body.classList.remove("_dark-theme"),chartTextColor="#262628",chart&&chart.update()));let l=thisTarget.closest(".header__select--selected");l?l.classList.contains("_active")?document.querySelectorAll(".header__select--selected._active").forEach(e=>{e.classList.remove("_active")}):(document.querySelectorAll(".header__select--selected._active").forEach(e=>{e.classList.remove("_active")}),l.classList.add("_active")):thisTarget.closest(".header__select")||document.querySelectorAll(".header__select--selected._active").forEach(e=>{e.classList.remove("_active")});let s=thisTarget.closest(".header__profile--settings-open"),i=document.querySelector(".header__profile--settings");if(s?(e.preventDefault(),i.classList.add("_active")):thisTarget.closest(".header__profile--settings")&&thisTarget.closest(".header__profile--settings-open")&&!thisTarget.closest(".header__profile--settings-close")||i.classList.remove("_active"),thisTarget.closest(".chart__settings--link")){e.preventDefault();let t=document.querySelector(".chart__wrapper");t.parentElement.querySelector(".chart__settings-popup").classList.add("_active"),t.classList.add("_blur")}else if(!thisTarget.closest(".chart__settings-popup")&&!thisTarget.closest(".chart__settings-popup--btn")||thisTarget.closest(".chart__settings-popup--close")){let e=document.querySelector(".chart__wrapper");e.parentElement.querySelector(".chart__settings-popup").classList.remove("_active"),e.classList.remove("_blur")}}));let verificationInputs=document.querySelectorAll(".login__verification--input");function checkInput(){for(let e=0;e<verificationInputs.length;e++)if(!verificationInputs[e].value)return!0}function timer(){document.querySelectorAll("._timer").forEach(e=>{e.style.display="block",e.nextElementSibling.style.display="none";let t=e.dataset.timer;function a(){e.textContent=t+"s",0==t?(clearTimeout(o),e.parentElement.classList.remove("_disabled"),e.style.display="none",e.nextElementSibling.style.display="block"):t--}t=Number(t.substring(0,e.dataset.timer.length-1)),a();let o=setInterval(a,1e3)})}verificationInputs.forEach(e=>{e.oninput=function(t){if("insertText"==t.inputType){let a=t.target.parentElement.nextElementSibling,o=t.target.closest("form");e.value=e.value[e.value.length-1].replace(/\D/g,"").substr(0,9),a.classList.contains("login__verification--label")&&e.value&&a.querySelector("input").focus(),checkInput()?o.querySelector(".login__form--submit").classList.add("_disabled"):o.querySelector(".login__form--submit").classList.remove("_disabled")}},e.addEventListener("keydown",(function(e){if("Backspace"==e.key||"Delete"==e.key){e.preventDefault(),e.target.value="";let t=e.target.parentElement.previousElementSibling,a=e.target.closest("form");t?t.classList.contains("login__verification--label")&&!e.target.value&&t.querySelector("input").focus():e.target.value="",checkInput()?a.querySelector(".login__form--submit").classList.add("_disabled"):a.querySelector(".login__form--submit").classList.remove("_disabled")}}))}),timer();let loginSlider=new Swiper(".login__slider",{spaceBetween:30,slidesPerView:1,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0}});